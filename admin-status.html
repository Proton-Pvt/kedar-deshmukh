<!doctype html>
<html>
<head>
<title>Order Status Update</title>
<style>
  body{font-family:Arial;padding:20px;}
  .card{padding:15px;border:1px solid #ccc;margin-bottom:15px;border-radius:6px;}
  button{padding:5px 10px;margin-right:5px;}
</style>
</head>

<body>
<h1>Update Order Status</h1>
<div id="orders"></div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
import { getFirestore, collection, query, onSnapshot, updateDoc, doc }
from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

const firebaseConfig = {
  apiKey: "YOUR_API_KEY",
  authDomain: "YOUR_DOMAIN",
  projectId: "YOUR_PROJECT_ID"
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

const ordersDiv = document.getElementById("orders");

onSnapshot(query(collection(db,"orders")), snapshot => {
  ordersDiv.innerHTML = "";
  snapshot.forEach(docSnap => {
    let data = docSnap.data();
    let id = docSnap.id;

    ordersDiv.innerHTML += `
      <div class="card">
        <h3>${data.customerName} (${data.phone})</h3>
        <p>Total: â‚¹${data.totalAmount}</p>
        <p>Current: ${data.status}</p>

        <button onclick="updateStatus('${id}','Pending')">Pending</button>
        <button onclick="updateStatus('${id}','Confirmed')">Confirmed</button>
        <button onclick="updateStatus('${id}','Preparing')">Preparing</button>
        <button onclick="updateStatus('${id}','Out for Delivery')">Out for Delivery</button>
        <button onclick="updateStatus('${id}','Completed')">Completed</button>
      </div>
    `;
  });
});

window.updateStatus = async function(id, status){
  await updateDoc(doc(db,"orders",id),{status});
  alert("Status updated to: " + status);
};
</script>

</body>
</html>
